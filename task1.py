import networkx as nx
import matplotlib.pyplot as plt

# Створюємо порожній граф
G = nx.Graph()

# Додаємо вузли для всіх трьох ліній
stations = [
    # Червона лінія (Святошинсько-Броварська)
    "Академмістечко", "Житомирська", "Святошин", "Нивки", "Берестейська", 
    "Шулявська", "Політехнічний інститут", "Вокзальна", "Університет", "Театральна",
    "Хрещатик", "Арсенальна", "Дніпро", "Гідропарк", "Лівобережна", "Дарниця",
    "Чернігівська", "Лісова",
    # Синя лінія (Куренівсько-Червоноармійська)
    "Героїв Дніпра", "Мінська", "Оболонь", "Почайна", "Тараса Шевченка", 
    "Контрактова площа", "Поштова площа", "Майдан Незалежності", 
    "Площа Льва Толстого", "Олімпійська", "Палац Україна", "Либідська", 
    "Деміївська", "Голосіївська", "Васильківська", "Виставковий центр", 
    "Іподром", "Теремки",
    # Зелена лінія (Сирецько-Печерська)
    "Сирець", "Дорогожичі", "Лук'янівська", "Золоті ворота", "Палац Спорту", 
    "Кловська", "Печерська", "Дружби народів", "Видубичі", "Славутич", 
    "Осокорки", "Позняки", "Харківська", "Вирлиця", "Бориспільська", 
    "Червоний Хутір"
]

# Додаємо станції до графа
G.add_nodes_from(stations)

# Додаємо ребра для всіх трьох ліній
red_line_edges = [
    ("Академмістечко", "Житомирська"), 
    ("Житомирська", "Святошин"), 
    ("Святошин", "Нивки"), 
    ("Нивки", "Берестейська"),
    ("Берестейська", "Шулявська"), 
    ("Шулявська", "Політехнічний інститут"), 
    ("Політехнічний інститут", "Вокзальна"),
    ("Вокзальна", "Університет"),
    ("Університет", "Театральна"), 
    ("Театральна", "Хрещатик"), 
    ("Хрещатик", "Арсенальна"), 
    ("Арсенальна", "Дніпро"),
    ("Дніпро", "Гідропарк"), 
    ("Гідропарк", "Лівобережна"), 
    ("Лівобережна", "Дарниця"), 
    ("Дарниця", "Чернігівська"),
    ("Чернігівська", "Лісова")
]

blue_line_edges = [
    ("Героїв Дніпра", "Мінська"),
    ("Мінська", "Оболонь"),
    ("Оболонь", "Почайна"),
    ("Почайна", "Тараса Шевченка"),
    ("Тараса Шевченка", "Контрактова площа"),
    ("Контрактова площа", "Поштова площа"),
    ("Поштова площа", "Майдан Незалежності"),
    ("Майдан Незалежності", "Площа Льва Толстого"),
    ("Площа Льва Толстого", "Олімпійська"),
    ("Олімпійська", "Палац Україна"),
    ("Палац Україна", "Либідська"),
    ("Либідська", "Деміївська"),
    ("Деміївська", "Голосіївська"),
    ("Голосіївська", "Васильківська"),
    ("Васильківська", "Виставковий центр"),
    ("Виставковий центр", "Іподром"),
    ("Іподром", "Теремки")
]

green_line_edges = [
    ("Сирець", "Дорогожичі"),
    ("Дорогожичі", "Лук'янівська"),
    ("Лук'янівська", "Золоті ворота"),
    ("Золоті ворота", "Палац Спорту"),
    ("Палац Спорту", "Кловська"),
    ("Кловська", "Печерська"),
    ("Печерська", "Дружби народів"),
    ("Дружби народів", "Видубичі"),
    ("Видубичі", "Славутич"),
    ("Славутич", "Осокорки"),
    ("Осокорки", "Позняки"),
    ("Позняки", "Харківська"),
    ("Харківська", "Вирлиця"),
    ("Вирлиця", "Бориспільська"),
    ("Бориспільська", "Червоний Хутір")
]

# Додаємо ребра до графа
G.add_edges_from(red_line_edges)
G.add_edges_from(blue_line_edges)
G.add_edges_from(green_line_edges)

# Додаємо пересадки між лініями
G.add_edge("Театральна", "Золоті ворота")
G.add_edge("Хрещатик", "Майдан Незалежності")
G.add_edge("Площа Льва Толстого", "Палац Спорту")

# Візуалізуємо оновлений граф
plt.figure(figsize=(12, 10))
pos = nx.spring_layout(G, seed=42)  # Фіксуємо розташування вузлів для стабільності візуалізації
nx.draw(G, pos, with_labels=True, node_color="lightblue", node_size=500, font_size=8, font_weight="bold", edge_color="gray")
plt.title("Київське метро (з урахуванням пересадок)")
plt.show()

# Аналіз основних характеристик графа
num_nodes = G.number_of_nodes()
num_edges = G.number_of_edges()
degree_dict = dict(G.degree())  # Ступінь кожної вершини
average_degree = sum(degree_dict.values()) / num_nodes  # Середній ступінь вершини

print(f"Кількість вершин (станцій): {num_nodes}")
print(f"Кількість ребер (шляхів між станціями): {num_edges}")
print(f"Середній ступінь вершини: {average_degree:.2f}")

# Виведення ступеня кожної вершини
print("\nСтупінь кожної вершини:")
for station, degree in degree_dict.items():
    print(f"{station}: {degree}")